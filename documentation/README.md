# Flat scrapper

## Description
Небольшой pet-project, главной фукнцией которого будет сбор публично доступной информации с какого-либо крупного сайта(а может и нескольких по выбору) по поиску недвижимости в целях поиска наиболее выгодного варианта, с учётом некоторых плавающих факторов

## Functionality
 - Выбор сайта по поиску недвижимости(в первой версии выбора не будет, будет выбран наиболее легкий кандидат по парсингу html страницы)
 - Подключение собственной функции сортировки предложений в виде python-скрипта
 - Вывод наиболее подходящих вариантов 

## Architecture
Модули:
 - Модуль выгрузки html страницы
```python
class HTMLGrabber:
    @staticmethod
    def getPage(url: str) -> str
```
 - Модуль парсинга страницы и выгрузки полезной информации в виде объекта для удобной работы
```python
class Parser(ABC):
    @abstractmethod
    def parse(page: str) -> List

class CianParser(Parser):
    def parse(page: str) -> List
```
 - Модуль работы с пользователем и обработки введенных данных для удобной работы
```python
class Formatter(ABC):
    @abstractmethod
    def format(url: str) -> str

class CianFormatter(Formatter):
    def format(url: str) -> str
```
 - Модуль обработки и вывода данных(возможно изменение со стороны пользователя)
```python
class Processor:
    def process(flats: List)
```
 - Файл с хэндлерами для обработки ответа пользователю
```python
@dp.message(Command("test"))
async def handler()
```

## Additional goals
В случае быстрого завершения работы предвидится подключение некоторого фукнционала для работы скрипта в фоновом режиме в целях постоянного сбора информации и информировании пользователя в случае появления выгодного предложения

## Used technologies and libraries
Проект реализован средствами Python 3 и следующими его библиотеками 
Использованы следующие его библиотеки:
 - Requests - для отправки запросов на сервер и получения html файла
 - BeautifulSoup - для парсинга полученной страницы
 - Aiogram - для работы с программой через телеграм бота (использована для инициализации бота и управления хэндлерами: пользователь отправляет сообщение боту => сообщение перехватывается подходящим обработчиком => бот отвечает сообщением, полученным от обработчика)

## Usage
 - Пользователь вызывает исполнение файла, далее ему на выбор предлагается список из поддерживаемых сайтов. Он делает выбор, после чего Grabber выгружает страницу. Далее вызывается обработка этой страницы, после чего ищется необходимый Processor(необходимо организовать поиск, так как пользователь должен иметь возможность писать свои обработчики), и вызывается обработка
 - Аналогично предыдущему пункту, но через интерфейс общения с телеграм ботом

## Алгоритм взаимодействия с ботом
 - Инициализация бота
 - Начинаем поллинг апдейтов через диспетчера
 - Ожидание сообщения
 - Сообщение получено, автоматически вызывается необходимый хендлер, генерирующий ответ
 - Отправка ответа на сообщение